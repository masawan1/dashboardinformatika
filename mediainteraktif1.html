<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulasi Karir di Industri Kreatif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .option-button {
            transition: all 0.2s ease-in-out;
            border: 1px solid transparent;
        }
        .option-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #4f46e5;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-3xl bg-white rounded-xl shadow-2xl p-6 md:p-8 text-center">
        <header class="mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-indigo-700">Simulasi Karir: Broadcasting & Film</h1>
            <p class="text-gray-500 mt-2">Dari Ide ke Layar, temukan peranmu di industri kreatif!</p>
        </header>

        <div id="story-text" class="text-lg leading-relaxed mb-8 min-h-[120px] text-left bg-gray-50 p-4 rounded-lg">
            <!-- Story content will be injected here by JavaScript -->
        </div>

        <div id="options-buttons" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Option buttons will be injected here by JavaScript -->
        </div>

        <!-- Tombol Kembali ke Dashboard -->
        <div class="mt-8">
            <a href="https://masawan1.github.io/dashboard_D2PK/" class="inline-block bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all 0.2s ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400">
                Kembali ke Dashboard
            </a>
        </div>

        <footer class="mt-8 pt-4 border-t border-gray-200">
            <div id="status-bar" class="flex flex-wrap justify-around text-sm text-gray-600 gap-2">
                <span id="money-status" class="font-semibold">Uang: Rp 0</span>
                <span id="skill-status" class="font-semibold">Keterampilan: -</span>
                <span id="reputation-status" class="font-semibold">Reputasi: 0</span>
            </div>
        </footer>
    </div>

    <script>
        // --- DOM Elements ---
        const storyTextElement = document.getElementById('story-text');
        const optionsButtonsElement = document.getElementById('options-buttons');
        const moneyStatusElement = document.getElementById('money-status');
        const skillStatusElement = document.getElementById('skill-status');
        const reputationStatusElement = document.getElementById('reputation-status');

        // --- Game State ---
        let state = {};

        // --- Game Logic ---
        function startGame() {
            // Initialize the player's state
            state = {
                money: 1000000,
                skills: [],
                reputation: 10, // Starts with a base reputation
                role: null,
            };
            // Show the first story node
            showStoryNode(1);
        }

        function showStoryNode(storyNodeId) {
            // Find the story node by its ID
            const storyNode = storyNodes.find(node => node.id === storyNodeId);

            // Check if storyNode is undefined before accessing its properties
            if (!storyNode) {
                console.error(`Error: Story node with ID ${storyNodeId} not found.`);
                // Optionally, redirect to a default node or restart the game
                startGame(); // Restart the game if a node is not found
                return;
            }

            storyTextElement.innerHTML = storyNode.text;

            // Clear previous options
            while (optionsButtonsElement.firstChild) {
                optionsButtonsElement.removeChild(optionsButtonsElement.firstChild);
            }

            // Add new options for the current story node
            storyNode.options.forEach(option => {
                if (showOption(option)) {
                    const button = document.createElement('button');
                    button.innerHTML = option.text; // Use innerHTML to render styled text
                    button.className = 'option-button w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 text-left';
                    button.addEventListener('click', () => selectOption(option));
                    optionsButtonsElement.appendChild(button);
                }
            });

            updateStatusBar();
        }

        function showOption(option) {
            if (!option.requiredState) return true;
            return option.requiredState(state);
        }

        function selectOption(option) {
            const nextStoryNodeId = option.nextText;
            if (nextStoryNodeId <= 0) {
                startGame(); // Restart game if nextText is 0 or less
                return;
            }
            // Apply state changes from the chosen option
            if (option.setState) {
                const newState = option.setState(state);
                state = { ...state, ...newState };
            }
            showStoryNode(nextStoryNodeId);
        }

        function updateStatusBar() {
            moneyStatusElement.innerText = `Uang: Rp ${state.money.toLocaleString('id-ID')}`;
            skillStatusElement.innerText = `Keterampilan: ${state.skills.length > 0 ? state.skills.join(', ') : 'Pemula'}`;
            reputationStatusElement.innerText = `Reputasi: ${state.reputation}`;
        }

        // --- Story Content based on the provided text ---
        const storyNodes = [
            // --- STARTING POINT ---
            {
                id: 1,
                text: "Selamat datang di industri broadcasting dan film! Setiap karya lahir dari tiga tahap: Pra-Produksi, Produksi, dan Pasca-Produksi. Di mana minat terbesarmu?",
                options: [
                    { text: "<strong>Pra-Produksi:</strong> Aku adalah otak di balik sebuah karya!", nextText: 100 },
                    { text: "<strong>Produksi:</strong> Aku adalah tim inti di lapangan!", nextText: 200 },
                    { text: "<strong>Pasca-Produksi:</strong> Aku menyulap rekaman mentah menjadi karya jadi!", nextText: 300 },
                    { text: "<strong>Technopreneur:</strong> Aku ingin membangun usaha kreatifku sendiri!", nextText: 400 },
                ]
            },
            // --- PATH 1: PRA-PRODUKSI ---
            {
                id: 100,
                text: "Kamu berada di tahap perancangan ide. Peran apa yang ingin kamu ambil? <br><br>• <b>Penulis Skenario</b> menciptakan cerita. <br>• <b>Sutradara</b> mengarahkan visi artistik.",
                options: [
                    { text: "Menjadi Penulis Skenario", nextText: 101, setState: s => ({ role: 'Penulis Skenario' }) },
                    { text: "Menjadi Sutradara", nextText: 102, setState: s => ({ role: 'Sutradara' }) },
                ]
            },
            {
                id: 101,
                text: "Sebagai Penulis Skenario, kamu mendapat tawaran membuat film pendek berbasis kearifan lokal. Idenya adalah 'Sahabat dari Desa' tentang toleransi. Namun, produsermu ingin cerita yang lebih komersial. Apa yang kamu lakukan?",
                options: [
                    { text: "Tetap pada ide awal, jelaskan potensinya. (Menguji Komunikasi Efektif)", nextText: 110, setState: s => ({ reputation: s.reputation + 10, skills: [...new Set([...s.skills, 'Penulisan Naskah'])] }) },
                    { text: "Ubah cerita sesuai keinginan produser. <br><small class='text-green-300 font-normal'>(Bonus: +Rp 200.000)</small>", nextText: 111, setState: s => ({ reputation: s.reputation + 5, money: s.money + 200000 }) },
                ]
            },
            {
                id: 102,
                text: "Sebagai Sutradara, kamu harus melakukan 'breakdown kebutuhan produksi' untuk film pendek. Anggaran sangat terbatas. Apa prioritas utamamu?",
                options: [
                    { text: "Sewa kamera terbaik, kompromi di hal lain. <br><small class='text-red-300 font-normal'>(Biaya: -Rp 500.000)</small>", nextText: 112, setState: s => ({ money: s.money - 500000, skills: [...new Set([...s.skills, 'Penyutradaraan'])] }) },
                    { text: "Fokus pada lokasi dan aktor yang kuat, gunakan alat seadanya. (Fokus pada Cerita)", nextText: 113, setState: s => ({ reputation: s.reputation + 10, skills: [...new Set([...s.skills, 'Manajemen Produksi'])] }) },
                ]
            },
            // --- PATH 2: PRODUKSI ---
            {
                id: 200,
                text: "Selamat datang di lokasi syuting! Kamu adalah eksekutor di lapangan. Peran apa yang kamu pilih? <br><br>• <b>Kameramen</b> mengoperasikan kamera. <br>• <b>Soundman</b> merekam audio berkualitas.",
                options: [
                    { text: "Menjadi Kameramen", nextText: 201, setState: s => ({ role: 'Kameramen' }) },
                    { text: "Menjadi Soundman", nextText: 202, setState: s => ({ role: 'Soundman' }) },
                ]
            },
            {
                id: 201,
                text: "Sebagai Kameramen, saat syuting outdoor, tiba-tiba hujan deras. Banyak kabel listrik dan lampu di area terbuka. Apa tindakan pertamamu sesuai prinsip K3 (Keselamatan dan Kesehatan Kerja)?",
                options: [
                    { text: "Segera amankan alat dan matikan sumber listrik. (Mengutamakan K3)", nextText: 210, setState: s => ({ reputation: s.reputation + 15, skills: [...new Set([...s.skills, 'Manajemen Risiko'])] }) },
                    { text: "Lanjutkan syuting, adegan hujan terlihat bagus. <br><small class='text-red-300 font-normal'>(Risiko Ganti Rugi: -Rp 300.000)</small>", nextText: 211, setState: s => ({ reputation: s.reputation - 20, money: s.money - 300000 }) },
                ]
            },
            {
                id: 202,
                text: "Sebagai Soundman, kamu merekam dialog penting, tetapi ada suara bising dari lingkungan sekitar. Sutradara memintamu untuk lanjut saja. Apa yang kamu lakukan?",
                options: [
                    { text: "Jelaskan risikonya dan minta waktu untuk mencari solusi. (Menguji Profesionalisme)", nextText: 212, setState: s => ({ reputation: s.reputation + 10, skills: [...new Set([...s.skills, 'Problem Solving'])] }) },
                    { text: "Ikuti saja perintah sutradara. (Pasif)", nextText: 213, setState: s => ({ reputation: s.reputation - 5 }) },
                ]
            },
            // --- PATH 3: PASCA-PRODUKSI ---
            {
                id: 300,
                text: "Kamu berada di ruang editing, tempat keajaiban terjadi. Peran apa yang kamu minati? <br><br>• <b>Editor Video</b> menyusun adegan. <br>• <b>VFX Artist</b> menciptakan efek visual.",
                options: [
                    { text: "Menjadi Editor Video", nextText: 301, setState: s => ({ role: 'Editor Video' }) },
                    { text: "Menjadi VFX Artist", nextText: 302, setState: s => ({ role: 'VFX Artist' }) },
                ]
            },
            {
                id: 301,
                text: "Sebagai Editor Video, klien meminta revisi besar H-1 sebelum deadline. Ini akan memakan banyak waktu. Apa strategimu? (Menguji Manajemen Waktu)",
                options: [
                    { text: "Kerja lembur semalaman untuk memenuhi permintaan. <br><small class='text-green-300 font-normal'>(Bonus Lembur: +Rp 500.000)</small>", nextText: 310, setState: s => ({ money: s.money + 500000, reputation: s.reputation + 10, skills: [...new Set([...s.skills, 'Editing Video'])] }) },
                    { text: "Negosiasi ulang deadline dan biaya tambahan dengan klien. (Komunikasi Efektif)", nextText: 311, setState: s => ({ reputation: s.reputation + 15, skills: [...new Set([...s.skills, 'Negosiasi'])] }) },
                ]
            },
            // --- New Node for VFX Artist ---
            {
                id: 302,
                text: "Sebagai VFX Artist, kamu diberi tugas membuat efek ledakan realistis dengan deadline yang sangat ketat. Kamu tahu ini butuh waktu, tapi klien sangat mendesak. Apa yang kamu lakukan?",
                options: [
                    { text: "Kerjakan secepat mungkin, meskipun hasilnya tidak 100% sempurna. <br><small class='text-red-300 font-normal'>(Reputasi: -5, Keterampilan: Efek Visual)</small>", nextText: 312, setState: s => ({ reputation: s.reputation - 5, skills: [...new Set([...s.skills, 'Efek Visual'])] }) },
                    { text: "Jelaskan kesulitan dan negosiasi perpanjangan waktu. (Manajemen Proyek)", nextText: 313, setState: s => ({ reputation: s.reputation + 10, skills: [...new Set([...s.skills, 'Manajemen Proyek'])] }) },
                ]
            },
            // --- PATH 4: TECHNOPRENEUR ---
            {
                id: 400,
                text: "Kamu ingin menjadi Technopreneur Kreatif! Dengan modal dan alat sederhana (smartphone, laptop), peluang usaha apa yang akan kamu ambil?",
                options: [
                    { text: "Membuat konten YouTube edukatif tentang film.", nextText: 401, setState: s => ({ role: 'YouTuber' }) },
                    { text: "Menyediakan jasa editing video untuk UMKM.", nextText: 402, setState: s => ({ role: 'Freelance Editor' }) },
                ]
            },
            {
                id: 401,
                text: "Sebagai YouTuber, videomu menggunakan cuplikan film populer tanpa izin dan mendapat teguran hak cipta (copyright strike). Apa yang kamu lakukan?",
                options: [
                    { text: "Hapus video dan pelajari tentang 'fair use'. (Etika Digital)", nextText: 410, setState: s => ({ reputation: s.reputation + 5, skills: [...new Set([...s.skills, 'Etika Digital'])] }) },
                    { text: "Abaikan saja, berharap tidak terjadi lagi.", nextText: 411, setState: s => ({ reputation: s.reputation - 15 }) },
                ]
            },
            // --- New Node for Freelance Editor ---
            {
                id: 402,
                text: "Sebagai Freelance Editor, kamu mendapat klien UMKM yang terus-menerus meminta revisi di luar kesepakatan awal dan menunda pembayaran. Bagaimana kamu menangani situasi ini?",
                options: [
                    { text: "Terus layani revisi untuk menjaga hubungan baik. <br><small class='text-red-300 font-normal'>(Uang: -Rp 100.000, Reputasi: +5)</small>", nextText: 412, setState: s => ({ money: s.money - 100000, reputation: s.reputation + 5, skills: [...new Set([...s.skills, 'Layanan Pelanggan'])] }) },
                    { text: "Tegaskan batasan revisi dan minta pembayaran sesuai kontrak. (Negosiasi & Profesionalisme)", nextText: 413, setState: s => ({ reputation: s.reputation + 15, skills: [...new Set([...s.skills, 'Negosiasi Bisnis'])] }) },
                ]
            },
            // --- ENDING NODES ---
            {
                id: 110, text: "Produser terkesan dengan argumenmu. Film pendekmu sukses di festival lokal dan mengangkat namamu sebagai penulis berbakat. Selamat!",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 111, text: "Filmnya laku, tapi kamu merasa kurang puas secara kreatif. Namun, kamu belajar pentingnya kompromi dalam industri. Pengalaman yang berharga.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 112, text: "Visual filmmu memukau, tapi ceritanya terasa kurang kuat. Kamu belajar bahwa teknologi hanyalah alat, cerita adalah jiwa.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 113, text: "Dengan sumber daya terbatas, kamu berhasil membuat film yang menyentuh. Kamu membuktikan bahwa visi seorang sutradara lebih penting dari mahalnya peralatan.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 210, text: "Seluruh kru berterima kasih atas keputusan cepatmu. Kamu dikenal sebagai orang yang profesional dan bertanggung jawab. Reputasimu meningkat pesat!",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 211, text: "Sebuah lampu korslet dan merusak kamera! Produksi tertunda dan kamu harus membayar ganti rugi. Ini pelajaran mahal tentang pentingnya K3.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 212, text: "Sutradara menghargai masukanmu. Setelah menunggu, kamu berhasil mendapatkan audio yang jernih. Kualitas film terselamatkan berkat profesionalismu.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
             {
                id: 213, text: "Benar saja, saat pasca-produksi, audio terbukti tidak bisa digunakan dan harus direkam ulang (dubbing). Ini menambah biaya dan waktu. Kamu belajar untuk lebih berani bersuara.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 310, text: "Klien sangat senang dengan hasil kerjamu yang cepat. Kamu mendapat bonus dan reputasi sebagai editor yang bisa diandalkan dalam situasi genting.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 311, text: "Klien memahami situasinya dan setuju untuk menambah waktu dan biaya. Kamu berhasil menjaga kualitas kerja tanpa mengorbankan kesehatanmu. Sebuah win-win solution!",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            // --- New Ending Nodes for VFX Artist ---
            {
                id: 312, text: "Efek ledakanmu lumayan, tapi ada yang merasa kurang. Kamu belajar pentingnya keseimbangan antara kecepatan dan kualitas. Ini pengalaman yang baik untuk proyek selanjutnya.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 313, text: "Klien menghargai kejujuranmu dan memberikan perpanjangan waktu. Hasil efek ledakanmu luar biasa dan mendapat pujian. Reputasimu sebagai VFX Artist yang andal meningkat!",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            // --- New Ending Nodes for Freelance Editor ---
            {
                id: 412, text: "Klien akhirnya membayar, tapi kamu kehilangan banyak waktu dan energi. Kamu belajar bahwa menjaga hubungan baik itu penting, tapi batas profesionalisme juga harus ditegakkan.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
            {
                id: 413, text: "Klien akhirnya membayar dan revisi berhenti. Kamu mungkin kehilangan klien ini, tapi kamu telah menetapkan standar profesionalisme yang kuat untuk bisnismu.",
                options: [{ text: "Mulai Lagi", nextText: 0 }]
            },
        ];

        // --- Start the game on page load ---
        startGame();
    </script>

</body>
</html>
